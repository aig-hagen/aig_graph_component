<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" href='./favicon.ico' />
        <link rel="stylesheet" href='./graph-component.css' />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Graph Editor</title>
        <!-- MathJax for TeX notation -->
        <script src='load-mathjax.js' async></script>
    </head>
    <body style="margin: 0; padding: 0">
    <div style='display: flex; position: relative; height: 100vh'>
        <graph-component id='gc1' style='flex: 1; position: relative'></graph-component>
        <graph-component id='gc2' style='flex: 1; position: relative'></graph-component>
    </div>
    <script src='./graph-component.js'></script>
    <script>
        // get the graph editor instance by its id, on this you will call all available functions
        let inst1 = getGraphComponentById('gc1')
        let inst2 = getGraphComponentById('gc2')

        // print the (currently displayed) graph
        inst1.printGraph()

        // assign the (currently displayed) graph to a variable and afterward log it to the console
        let graph1 = inst1.getGraph();
        console.log(graph1)

        // display a graph in the second graph editor
        inst2.setGraph(graph1)

        // write some graphs manually with different options
        let graphAsObject = {
            nodes: [
                {id: 0, label: "A"},
                {id: 1, label: "B"}
            ],
            links: [
                {sourceId: 0, targetId: 1, label: "A to B"}
            ]
        }

        let graphAsTgf = "0 A\n 1 B\n#\n 0 1 A to B"

        let graphAsObjectWithPositionColorAndLatex = {
            nodes: [
                {id: 0, label: "$a_1$", x: 24, y: 24},
                {id: 1, label: "$b_1$", color: "lavenderblush", x: 222, y: 111},
                {id: 2, label: "$c_1$", x: 442, y: 442}
            ],
            links: [
                {sourceId: 0, targetId: 1, label: "$a_1\\ to\\ b_1$"},
                {sourceId: 2, targetId: 2, label: "$c_1\\ to\\ c_1$"}
            ]
        }

        let graphAsObjectWithEditability = {
            nodes: [
                {id: 0, label: "$a_0$", x: 24, fixedPosition: {x: true, y:false}},
                {id: 1, label: "b", color: "lavenderblush", x: 222, y: 142, labelEditable: false},
                {id: 2, label: "c", deletable: false, allowIncomingLinks: false, allowOutgoingLinks: false}
            ],
            links: [
                {sourceId: 0, targetId: 1, label: "$a_0\\ to\\ b$", deletable: true},
                {sourceId: 2, targetId: 2, label: "c to c", labelEditable: false}
            ]
        }

        // display the (manually written graph as object) in the first graph editor, and the other one in the second
        inst1.setGraph(graphAsObject)
        inst2.setGraph(graphAsTgf)
        inst1.setGraph(graph1) //or the one you assigned to the variable and got with getGraph()

        // if you call setGraph without arguments, it will clear the graph editor
        inst1.setGraph()

        // change the color of existing nodes and links by their id
        // this color can be a html color name (https://www.w3schools.com/colors/colors_names.asp), hexadecimal, rgb or hsl-color-model format
        inst1.setColor("bisque", [0,1])
        // change the color of all existing nodes by just providing a color without providing ids
        inst2.setColor("HSL(212,92%,45%,0.5)")
        inst2.setColor("RGB(250,70,99)")
        inst2.setColor("#8FBC8F")
        //the same for links
        inst2.setColor("orangered", ["0-1", "2-2"])

        // delete nodes or links by their id
        // delete link that origins in node with id 0 and points to node with id 1
        inst2.deleteElement("0-1")
        // delete node with id 0 and id 1
        inst2.deleteElement([0, 1])

        // turning ability on for zooming, that nodes repel each other and that there is a fixed link distance
        inst2.toggleZoom(true)
        inst2.toggleNodePhysics(true)
        inst2.toggleFixedLinkDistance(true)

        // after zooming, reset the view to the default position
        inst2.resetView()

        // set a graph and disable its editing via GUI
        inst1.setGraph(graphAsObjectWithPositionColorAndLatex);
        inst1.toggleGraphEditingInGUI(false);

        // set a graph that already has individual editing options
        inst2.setGraph(graphAsObjectWithEditability);


        //This function can be used, to get the graph editor instance by its id.
        function getGraphComponentById(id) {
            return document.getElementById(id)._instance.exposed
        }
    </script>
    </body>
</html>
